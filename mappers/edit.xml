<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Edit">


<!--	Roster update		-->

	<update id="update_roster" parameterType="map">
	
		<if test="name == null">
			UPDATE
				League
			SET
				roster = #{roster}
			WHERE
				name = 'Legend League';
			
			UPDATE
				Club
			SET
				roster = 0
			WHERE
				roster = 1;
			
			<if test="rosterlist != null">
				<foreach collection="rosterlist" index="idx" separator=";">
				
					UPDATE
						Club
					SET
						roster = 1
					WHERE
						name = #{rosterlist[${idx}]}
				
				</foreach>
			</if>
		</if>
		<if test="name != null">
		
			UPDATE
				Club
			SET
				Manager = #{manager},
				Player = #{roster}
			WHERE
				name = #{name};
			
			UPDATE
				Player, Manager
			SET
				club = null
			WHERE
				club = #{name};
			
			<if test="rosterlist != null">
				<foreach collection="rosterlist" index="idx" separator=";">
				
					UPDATE
						Player
					SET
						club = #{name}
					WHERE
						name = #{rosterlist[${idx}]}
				
				</foreach>
			</if>
		</if>
	
	</update>
	
	
<!-- 	로스터 등록	 -->

	<update id="updaterosterclub" parameterType="map">
	
		UPDATE
			Club
		SET
			manager = #{manager},
			player = #{player},
			ovr = #{ovr}
		WHERE
			name = #{name}
		
	</update>
	
	<update id="updaterosterclubclear" parameterType="map">
	
		UPDATE
			Player
		SET
			club = 'Free'
		WHERE
			club = #{name}
		
	</update>
	<update id="updaterosterplayer" parameterType="map">
	
		UPDATE
			Player
		SET
			club = #{name}
		WHERE
			name = #{player}
		
	</update>	
	
	
</mapper>
